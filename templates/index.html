<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>TEDA ‚Äî DA Benchmarking (Lorenz-96)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- App CSS -->
  <link rel="stylesheet" href="/static/css/app.css" />
</head>

<body>
  <div class="wrap">

    <!-- Top chips -->
    <div class="topbar">
      <div class="topActions">
        <a class="topChip" href="https://enino84.github.io/" target="_blank" rel="noopener">
          üåê <span>El√≠as D Nino-Ruiz website</span>
        </a>

        <a class="topChip" href="https://aml-cs.org" target="_blank" rel="noopener">
          üß™ <span>AML-CS website</span>
        </a>

        <button class="topChip" id="openResourcesBtn" title="Educational resources">
          üìö <span>Data Assimilation Educational resources</span>
        </button>

        <button class="topChip" id="openCiteBtn" title="How to reference this tool">
          ‚ùù <span>How to reference this tool</span>
        </button>

        <button class="topChip" id="openHelpBtn" title="Method help">
          ‚ùì <span>Help</span>
        </button>
      </div>
    </div>

    <!-- Hero -->
    <div class="hero">
      <div class="brandMark">
        <img src="/static/aml-cs.jpg" alt="AML-CS logo" />
        <h1 class="mainTitle">TEDA ‚Äî Data Assimilation Benchmarking Interface</h1>
        <p class="subtitle">
          Real-time benchmarking of ensemble-based data assimilation methods
          on Lorenz-96 using the TEDA educational framework.
        </p>
      </div>
    </div>

    <div class="stack">
      <div class="card">
        <h3>Run configuration</h3>

        <label>Model</label>
        <select id="model" disabled>
          <option value="lorenz96" selected>Lorenz96 (n=40, F=8)</option>
        </select>

        <div class="muted" style="margin-top:6px;">
          Lorenz-96 defaults are fixed to the standard benchmark setting (<b>n=40</b>, <b>F=8</b>).
        </div>

        <div class="row6">
          <div>
            <label>Ensemble size</label>
            <input id="ensemble_size" type="number" value="20" min="2"/>
          </div>
          <div>
            <label>m (number of observations)</label>
            <input id="m" type="number" value="32" min="1"/>
          </div>
          <div>
            <label>std_obs (obs noise std)</label>
            <input id="std_obs" type="number" step="0.001" value="0.01" min="0"/>
          </div>
          <div>
            <label>inf_fact (inflation)</label>
            <input id="inf_fact" type="number" step="0.01" value="1.04" min="0"/>
          </div>
          <div>
            <label>obs_freq</label>
            <input id="obs_freq" type="number" step="0.01" value="0.1" min="0.001"/>
          </div>
          <div>
            <label>end_time</label>
            <input id="end_time" type="number" step="0.1" value="10" min="0.1"/>
          </div>
        </div>

        <label style="margin-top:14px;">Add method instances (chips)</label>
        <div id="methodChips" class="chipbar"></div>

        <div class="hint">
          <div class="hintLeft">
            Click a method chip to add a <b>new instance</b>.
            The same method can appear multiple times with different parameters (e.g., <b>LETKF r=1</b> vs <b>r=2</b>).
            Each instance becomes a ‚Äútablet‚Äù where parameters can be edited.
            <div class="muted" style="margin-top:6px;">
              Method tablets are <b>collapsed by default</b> (to keep the UI clean). Expand only what you need.
            </div>
          </div>
          <div class="hintRight">
            <span class="selectedPill" id="methodCountBadge">0 selected</span>
          </div>
        </div>

        <div class="methodTablets" id="methodTablets"></div>

        <div class="actionsRow">
          <button class="btn" id="runBtn">Run (streaming)</button>
          <button class="secondaryBtn" id="clearMethodsBtn" title="Remove all selected method instances">Clear methods</button>
        </div>

        <div id="status" class="muted" style="margin-top:10px;"></div>
        <div class="footNote">
          Notes: This UI is intended for quick, repeatable experiments and side-by-side comparisons.
          Downloadable CSV is generated per run for offline plotting and paper-ready figures.
        </div>
      </div>

      <div class="runs" id="runs"></div>
    </div>
  </div>

  <!-- Resources Modal -->
  <div class="modalBackdrop" id="resourcesModal">
    <div class="modal">
      <div class="modalHead">
        <strong>üìö Data Assimilation Educational resources</strong>
        <button class="xbtn" id="closeResourcesBtn">‚úï</button>
      </div>
      <div class="modalBody">
        <div class="resourceCard">
          <h4>Free graduate course: Introduction to Data Assimilation</h4>
          <p>
            A structured, graduate-level learning path covering fundamentals of Data Assimilation:
            Bayesian foundations, sequential filtering, ensemble-based methods, and practical Python notebooks
            (Lorenz-63 / Lorenz-96 examples, uncertainty quantification, inflation and localization concepts).
          </p>
          <div class="resourceActions">
            <a class="resourceBtn" href="https://enino84.github.io/courses/intro_data_assimilation/" target="_blank" rel="noopener">
              üîó Open the course page
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Citation Modal -->
  <div class="modalBackdrop" id="citeModal">
    <div class="modal">
      <div class="modalHead">
        <strong>‚ùù How to reference this tool</strong>
        <button class="xbtn" id="closeCiteBtn">‚úï</button>
      </div>
      <div class="modalBody">
        <div class="citeIntro">
          If you use this tool or need to reference it in your research or publication, please cite:
        </div>

        <ul class="citeList">
          <li>
            Ni√±o-Ruiz, El√≠as D., and Sebastian Racedo Valbuena.
            <i>"TEDA: A Computational Toolbox for Teaching Ensemble Based Data Assimilation."</i>
            International Conference on Computational Science. Cham: Springer International Publishing, 2022.
            ‚Äî <a href="https://link.springer.com/chapter/10.1007/978-3-031-08760-8_60" target="_blank" rel="noopener">Springer link</a>
          </li>

          <li>
            Ni√±o-Ruiz, El√≠as D.
            <i>"TEDA: A lightweight Python framework for educational data assimilation."</i>
            SoftwareX 31 (2025): 102297.
            ‚Äî <a href="https://doi.org/10.1016/j.softx.2025.102297" target="_blank" rel="noopener">DOI</a>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Help Modal -->
  <div class="modalBackdrop" id="helpModal">
    <div class="modal">
      <div class="modalHead">
        <strong>‚ùì Method help & quick references</strong>
        <button class="xbtn" id="closeHelpBtn">‚úï</button>
      </div>
      <div class="modalBody">
        <div class="muted" style="margin-bottom:10px;">
          Short method descriptions provided by the backend. Intended as quick reminders (not full documentation).
        </div>
        <div class="helpGrid" id="helpGrid"></div>
      </div>
    </div>
  </div>

  <!-- App JS -->
  <script src="/static/js/app.js" defer></script>
</body>
</html>
